!function(e){function t(t){for(var n,s,r=t[0],l=t[1],c=t[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);h.length;)h.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,r=1;r<i.length;r++){var l=i[r];0!==o[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},o={1:0},a=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;a.push([143,0]),i()}({136:function(e,t,i){"use strict";(function(e,n){var o=i(71),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var s=function(){function t(i,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.onClickDeal=function(t){var i=e(t.currentTarget),o=i.attr("data-title"),s=parseInt(i.attr("data-dealNo"),10),r=parseInt(i.parents("._item").attr("data-reviewNo"),10);if("PW"!==n.sDevice){var l=a.bUseSlider?e(a.oSwiperReview.slides[a.oSwiperReview.activeIndex]):a.welContainer.find("._item:first");r=parseInt(l.attr("data-reviewNo"),10)}a.htOptions.onClickDeal&&a.htOptions.onClickDeal(o,s,r)},this.onReport=function(t){var i=parseInt(e(t.currentTarget).parents("._item").attr("data-reviewNo"),10);"function"==typeof a.htOptions.onReport&&a.htOptions.onReport(i)},this.onAddPhoto=function(t){if(!e(t.currentTarget).hasClass("disabled")){var i=parseInt(e(t.currentTarget).parents("._item").attr("data-reviewNo"),10);a.oModule.show("modify",i),a.hide(),t.preventDefault()}},this.onModify=function(t){if("app"!==n.view_mode||n.app._isValidAppVersion("4.6.9")||!a.htOptions.onModifyFileUploadNotSupportApp){var i=parseInt(e(t.currentTarget).parents("._item").attr("data-reviewNo"),10);a.oModule.show("modify",i),a.hide()}else a.htOptions.onModifyFileUploadNotSupportApp(e(t.currentTarget).parents("._item").attr("data-mainBuyNo"))},this.onDelete=function(t){var i=e(t.currentTarget).parents("._item:first"),n=parseInt(i.attr("data-mainBuyNo"),10),o=parseInt(i.attr("data-mainDealNo"),10),s=parseInt(i.attr("data-memberNo"),10),r=parseInt(i.attr("data-reviewNo"),10);"function"==typeof a.htOptions.onDelete&&a.htOptions.onDelete(n,o,s,r,a.oModule)},this.onOpenOption=function(t){"function"==typeof a.htOptions.onClickShowOption&&a.htOptions.onClickShowOption(),e(t.currentTarget).parents("[data-role=openOptionWrap]").toggleClass("on")},this.onRecommend=function(t){var i=e(t.currentTarget),o=parseInt(i.parents("._item").attr("data-reviewNo"),10),s=i.parents("._item").attr("data-isOwner");if("PW"!==n.sDevice){var r=a.bUseSlider?e(a.oSwiperReview.slides[a.oSwiperReview.activeIndex]):a.welContainer.find("._item:first");o=parseInt(r.attr("data-reviewNo"),10),s=r.attr("data-isOwner")}var l=s?JSON.parse(s):s;"function"==typeof a.htOptions.onRecommend&&a.htOptions.onRecommend(o,i.hasClass("on"),l)},this.onMouseOverImage=function(t){var i=e(t.currentTarget);i.hasClass("on")||(i.parents("._item:first").find("[data-role=photoOver]").removeClass("on"),i.addClass("on"),i.parents("._item:first").find("[data-role=mainImage]:first").attr("src",i.attr("data-image")))},this.onPrevReview=function(){0!==a.nCurrentIndex&&("function"==typeof a.htOptions.onClickPrevReview&&a.htOptions.onClickPrevReview(a.nCurrentIndex-1),a.showReviewSlide(a.nCurrentIndex-1),a.setDisableBtn())},this.onNextReview=function(){var e=a.wel.find("._item").length-1;a.nCurrentIndex>=e-a.NEXT_PAGE_MARGIN_COUNT&&a.oModule.getNextData(),a.nCurrentIndex+1>e||("function"==typeof a.htOptions.onClickNextReview&&a.htOptions.onClickNextReview(a.nCurrentIndex+1),a.showReviewSlide(a.nCurrentIndex+1),a.setDisableBtn())},this.htOptions=i,this.welContainer=i.welContainer,this.bShowModifyButtons=i.bShowModifyButtons,this.bUseSlider=i.bUseSlider,this.bShowAddPhotoBtn=i.bShowAddPhotoBtn,this.oModule=o,this.nCurrentIndex=0,this.NEXT_PAGE_MARGIN_COUNT=2,this.bShowed=!1,this.setEvent()}return a(t,[{key:"setRecommendCount",value:function(e,t,i){if(void 0!==this.wel){if("PW"===n.sDevice){var o=this.welContainer.find("._item[data-reviewNo="+e+"] [data-role=recommend]");o.find(".text").html(t),i?o.removeClass("on"):o.addClass("on")}else this.welContainer.find("._item[data-reviewNo="+e+"]").attr({"data-recommendCnt":t,"data-isRecommended":i?"N":"Y"}),this.updateRecommendElement();i?this.showToast("추천이 취소되었습니다"):this.showToast("추천해 주셔서 감사합니다")}}},{key:"showToast",value:function(e){this.wel&&"PW"!==n.sDevice&&(this.welToast||(this.welToast=this.wel.find("[data-role=review_toast]")),this.welToast.stop().find(".text").html(e),this.welToast.show().delay(2e3).fadeOut("slow"))}},{key:"resetData",value:function(){void 0!==this.wel&&("PW"===n.sDevice?this.wel.find('[data-role="reviewContainer"]').html(""):this.oSwiperReview.removeAllSlides())}},{key:"addData",value:function(e){void 0===this.wel&&!1===this.bShowed||(void 0===this.wel?(this.wel=this.render(),this.initReviewSwiper(),this.appendSlide(this.getReviewSlide(this.oModule.getData()))):this.appendSlide(this.getReviewSlide(e)),this.initImageSwiper(),this.setDisableBtn())}},{key:"removeItem",value:function(e){this.welContainer.find(".review_container[data-reviewNo="+e+"]").remove(),"PW"!==n.sDevice&&!0===this.bShowed&&this.updateSwiper()}},{key:"appendSlide",value:function(e){"PW"===n.sDevice||!1===this.bUseSlider?this.wel.find('[data-role="reviewContainer"]').append(e):this.oSwiperReview&&this.oSwiperReview.appendSlide(e)}},{key:"setEvent",value:function(){"PW"===n.sDevice&&(this.welContainer.on("click","[data-role=prevReview]",this.onPrevReview),this.welContainer.on("click","[data-role=nextReview]",this.onNextReview)),this.welContainer.on("click","[data-role=recommend]",this.onRecommend),this.welContainer.on("click","[data-role=report]",this.onReport),this.welContainer.on("click","[data-role=modifyPhotoReview]",this.onModify),this.welContainer.on("click","[data-role=addPhoto]",this.onAddPhoto),this.welContainer.on("click","[data-role=deletePhotoReview]",this.onDelete),this.welContainer.on("click","[data-role=openOptionBtn]",this.onOpenOption),this.welContainer.on("click","[data-role=dealLink]",this.onClickDeal),this.welContainer.on("mouseover","[data-role=photoOver]",this.onMouseOverImage)}},{key:"clearEvent",value:function(){"PW"===n.sDevice&&(this.welContainer.off("click","[data-role=prevReview]"),this.welContainer.off("click","[data-role=nextReview]")),this.welContainer.off("click","[data-role=recommend]"),this.welContainer.off("click","[data-role=report]"),this.welContainer.off("click","[data-role=modifyPhotoReview]"),this.welContainer.off("click","[data-role=addPhoto]"),this.welContainer.off("click","[data-role=deletePhotoReview]"),this.welContainer.off("click","[data-role=openOptionBtn]"),this.welContainer.off("click","[data-role=dealLink]"),this.welContainer.off("mouseover","[data-role=photoOver]")}},{key:"show",value:function(t){var i=this,o=!1;this.bShowed=!0,void 0===this.wel&&(o=!0,this.addData(this.oModule.getData()));var a=0,s=!1,r=null;void 0!==t&&this.oModule.getData().some((function(e,i){return e.reviewNo===t&&(a=i,s=!0===e.bIsUpdated,r=e),e.reviewNo===t}));s&&!1===o&&(this.updateSlide(a,r),this.initImageSwiper(),this.setDisableBtn()),this.showReviewSlide(a),this.wel.show(),this.setDisableBtn(),e(window).scrollTop(0),"PW"!==n.sDevice&&setTimeout((function(){i.updateSwiper()}),0)}},{key:"updateSwiper",value:function(){this.oSwiperReview&&this.oSwiperReview.update(),this.aSwiperImage&&Array.isArray(this.aSwiperImage)&&this.aSwiperImage.forEach((function(e){e.update()})),this.updateRecommendElement()}},{key:"showReviewSlide",value:function(e){this.nCurrentIndex=e,"PW"===n.sDevice||!1===this.bUseSlider?this.wel.find("._item").hide().eq(e).show():this.oSwiperReview.slideTo(e,0)}},{key:"updateSlide",value:function(e,t){this.wel.find("._item").eq(e).find(".review_detail").remove(),this.wel.find("._item").eq(e).append(o.b.bind(this)(t))}},{key:"initReviewSwiper",value:function(){var t=this;"PW"!==n.sDevice&&!1!==this.bUseSlider&&(this.oSwiperReview=new Swiper(".swiper-container-p",{autoHeight:!0,on:{slideChange:function(){var i=t.oModule.getData().length;t.oSwiperReview.activeIndex>=i-1-t.NEXT_PAGE_MARGIN_COUNT&&t.oModule.getNextData(),"PW"!==n.sDevice&&t.updateRecommendElement(),e(window).scrollTop(0)}}}))}},{key:"updateRecommendElement",value:function(){var t=this.bUseSlider?e(this.oSwiperReview.slides[this.oSwiperReview.activeIndex]):this.welContainer.find("._item:first"),i="Y"===t.attr("data-isRecommended")?"on":"";this.welContainer.find("button[data-role=recommend]").removeClass("on").addClass(i).find(".text").html(t.attr("data-recommendCnt"))}},{key:"setDisableBtn",value:function(){var e=this.wel.find("._item").length-1;0===this.nCurrentIndex?this.welContainer.find("button[data-role=prevReview]").addClass("disabled").prop("disabled",!0):this.welContainer.find("button[data-role=prevReview]").removeClass("disabled").prop("disabled",!1),this.nCurrentIndex===e?this.welContainer.find("button[data-role=nextReview]").addClass("disabled").prop("disabled",!0):this.welContainer.find("button[data-role=nextReview]").removeClass("disabled").prop("disabled",!1)}},{key:"initImageSwiper",value:function(){if("PW"!==n.sDevice&&0!==e(".swiper-container-c").length){var t=new Swiper(".swiper-container-c",{nested:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"custom",renderCustom:function(t,i){e(t.el).parents("._item:first").find("span[data-role=pageNationCurrent]").html(i)}}});!Array.isArray(t)&&t&&t.update?this.aSwiperImage=[t]:this.aSwiperImage=t}}},{key:"hide",value:function(){this.wel&&this.wel.hide(),this.bShowed=!1}},{key:"getRefinedDealInfo",value:function(e){if(!e)return null;var t={sUrl:n.htCommonUrl.www_dealDetail+"/"+e.dealNo,sTitle:e.titleName,sImage:e.imageInfo.mobile3ColImageUrl,sPriceTypeHtml:"",sOrgPrice:"",sPrice:"",sPriceOver:"",nDealNo:e.dealNo};"LOCAL"!==e.categoryInfo.verticalType&&"TOUR"!==e.categoryInfo.verticalType||!e.area||(t.sTitle="["+e.area+"] "+e.titleName);var i=e.priceInfo.discountInfos[e.priceInfo.paymentDiscountInfoKey];return t.sPrice=n.util.numberWithComma(i.price),e.isUniformlyPrice&&i.price>0?(t.sPriceTypeHtml='<strong class="type">균일가</strong>',e.priceInfo.originalPrice>i.price&&(t.sOrgPrice=n.util.numberWithComma(e.priceInfo.originalPrice))):!i.discountType||"RATE"!==i.discountType&&"AMOUNT"!==i.discountType||(t.sPriceTypeHtml='<strong class="type"><span class="num">'+i.discountRate+"<em>%</em></span></strong>",t.sPriceOver=e.isDelegatePriceOver?"~":""),"PW"!==n.sDevice&&(e.launchInfo&&"WEB_DEAL_DETAIL"===e.launchInfo.type?t.sUrl=e.launchInfo.url:t.sUrl=n.htCommonUrl.www_m_dealDetail+"/"+e.dealNo),t}},{key:"render",value:function(){var e=this.oModule.getData();if(!e||0===e.length)return null;var t=e&&e.length?e[0]:{},i=this.getRefinedDealInfo(t.dealInfo);return this.welContainer.append(Object(o.a)(e,i)).find("div[data-role=reviewMain]")}},{key:"getReviewSlide",value:function(e){var t=this;return e.map((function(e){return'<div class="review_container swiper-slide _item"\n                    data-memberNo="'+e.memberNo+'"\n                    data-mainBuyNo="'+e.mainBuyNo+'"\n                    data-mainDealNo="'+e.mainDealNo+'"\n                    data-reviewNo="'+e.reviewNo+'"\n                    data-isOwner="'+e.isOwner+'"\n                    data-recommendCnt="'+(e.recommendCnt?e.recommendCnt:0)+'"\n                    data-isRecommended="'+(e.isRecommended?"Y":"N")+'">\n                    '+o.b.bind(t)(e)+"\n                </div>"})).join("")}}]),t}();t.a=s}).call(this,i(49),i(23))},137:function(e,t,i){"use strict";(function(e,i){var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function t(n,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.onScroll=function(){if(a.wel&&a.wel.is(":visible")){var t=a.wel.find(".photo_list_item:last").offset().top,i=a.wel.find(".photo_list_item:last").height();e(window).scrollTop()+e(window).height()>=t-2*i&&a.oModule.getNextData()}},this.onClickImage=function(t){"function"==typeof a.htOptions.onClickPhotoInList&&a.htOptions.onClickPhotoInList();var n=e(t.currentTarget);return i.util.setHashJSON({photoReview:"review",reviewNo:n.attr("data-reviewNo")}),a.nPrevScrollTop=e(window).scrollTop(),!1};var s=n.welContainer;this.nPrevScrollTop=0,this.bShowed=!1,this.oModule=o,this.welContainer=s,this.welWin=e(window),this.htOptions=n,this.setEvent()}return n(t,[{key:"setEvent",value:function(){this.welWin.on("scroll",this.onScroll),this.welContainer.on("click","a[data-role=showDetailReview]",this.onClickImage)}},{key:"clearEvent",value:function(){this.welContainer.off("click","a[data-role=showDetailReview]")}},{key:"resetData",value:function(){void 0!==this.wel&&this.wel.html("")}},{key:"addData",value:function(e){void 0===this.wel&&!1===this.bShowed||(void 0===this.wel&&this.init(),this.renderItem(e),this.onScroll())}},{key:"removeItem",value:function(e){this.welContainer.find("[data-reviewNo="+e+"]").remove()}},{key:"init",value:function(){this.wel=this.render(this.welContainer),this.renderItem(this.oModule.getData())}},{key:"show",value:function(){this.bShowed=!0,void 0===this.wel&&this.init(),this.wel.show(),e(window).scrollTop(this.nPrevScrollTop),this.nPrevScrollTop=0,this.onScroll()}},{key:"getImageListFromReview",value:function(e){var t=[];return e.forEach((function(e){e.imageInfo.image.forEach((function(i){t.push({img:i,reviewNo:e.reviewNo,whoCreate:e.whoCreate})}))})),t}},{key:"hide",value:function(){this.wel&&this.wel.hide(),this.bShowed=!1}},{key:"render",value:function(e){return e.append('<ul data-role="photoList" class="photo_list_wrap" style="display:none"></ul>').find("ul[data-role=photoList]")}},{key:"renderItem",value:function(e){var t="\n                "+this.getImageListFromReview(e).map((function(e){return'\n                    <li class="photo_list_item" data-reviewNo="'+e.reviewNo+'">\n                        <div class="photo_list_inner">\n                            <a href="#" data-role="showDetailReview" data-reviewNo="'+e.reviewNo+'" class="photo_link">\n                                <img src="http://storage.tmon.co.kr/thumbs/image?w=300&h=300&url='+encodeURI(e.img)+'" title="'+e.whoCreate+' 님의 리뷰 사진입니다." onerror="this.parentNode.className=\'photo_link error\'">\n                            </a>\n                        </div>\n                    </li>\n                    '})).join("")+"\n            ";this.wel.append(t)}}]),t}();t.a=o}).call(this,i(49),i(23))},138:function(e,t,i){"use strict";(function(e,n){var o=i(50),a=i(139),s=i(140),r=i(24),l=i(56),c=i(142),d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var u=function(){function t(i,r){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.onClickImage=function(t){if(t.preventDefault(),t.target===t.currentTarget&&d.MOBILEDEVICE.includes(e.sDevice)){var i=d.welUploadImageList.find("li._uploadImage"),n=d.welUploadImageList.find("li").index(t.currentTarget.parentNode),o=[],a=!0,s=!1,r=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var h=c.value;o.push(Object(l.b)(h.dataset.img))}}catch(e){s=!0,r=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw r}}e.app.callApp("webview","showPhotoReviewImages",n,o)}},this.onClickOpenOption=function(){d.wel.find("[data-role=reviewWriteOption]").toggleClass("open")},this.onClickSatisfyStar=function(e){d.sSatisfyPoint=n(e.currentTarget).val(),d.welSatisfyStar.removeClass("on"),d.welSatisfyStar.filter(":lt("+d.sSatisfyPoint+")").addClass("on"),d.welSatisfyTitle.html(o.a[d.sSatisfyPoint]),n("._saTitle").addClass("on")},this.onClickDeliveryStar=function(e){d.sDeliveryPoint=n(e.currentTarget).val(),d.welDeliveryStar.removeClass("on"),d.welDeliveryStar.filter(":lt("+d.sDeliveryPoint+")").addClass("on"),d.welDeliveryTitle.html(o.a[d.sDeliveryPoint]),n("._deTitle").addClass("on")},this.onClickSurveyItem=function(e){!0!==n(e.currentTarget).data("fixUse")?d.htSurveyItems[n(e.currentTarget).data("questionIdx")]=n(e.currentTarget).val():d.htSurveyFixItems[n(e.currentTarget).data("questionIdx")]=n(e.currentTarget).val()},this.showWriteNoticePopup=function(){d.welNoticePopup.show()},this.hideWriteNoticePopup=function(){d.welNoticePopup.hide(),d.wel.find("[role=writePopup]").hide()},this.onKeyUp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=d.welContents.val()||e;"string"!=typeof t&&(t="");var i=d.getRemoveSpaceAndLine(t),n=t.length,o=i.length;if(d.welContents.parents(".review_write_textarea:first").toggleClass("on",!!n),o>d.nReviewTextLimit){var a=d.nPrevReviewCount||n;d.welContents.val(t.substring(0,a)),o=d.nReviewTextLimit}else d.nPrevReviewCount=n;d.welTextCounter.html(o)},this.getRemoveSpaceAndLine=function(e){return e.replace(/ |\n/gi,"")},this.removeImage=function(t){n(t.currentTarget).parents("._uploadImage:first").remove(),n("#_uploadRImage .input_file").attr("disabled",!1),"PW"===e.sDevice&&n("#_uploadRImage").show();var i=n("#_uploadImageList ._uploadImage").length;n(".review_write_out .cnt, .review_write_header .cnt").text(i)},this.onClickMoreBtn=function(){d.welWriteInfo.toggleClass("on"),d.welWriteInfo.find("button>span.text").text(d.welWriteInfo.hasClass("on")?"닫기":"더보기")},this.onClickCancel=function(){d.complete(d.sReviewNo)},this.onClickRegister=function(){var e=d.validate();e&&(d.bIsModify?d.modify(e):d.register(e))},this.MOBILEDEVICE=["MA","MI"],this.bAjaxRegister=!1,this.sSatisfyPoint=0,this.sDeliveryPoint=0,this.nReviewTextLimit=600,this.nPrevReviewCount=0,this.htOptions=i,this.welContainer=i.welContainer,this.oModule=r,this.sMainDealSrl=e.util.gup("mainDealSrl"),this.sMainBuySrl=e.util.gup("mainBuySrl"),this.oImageUpload=new a.a(this.welContainer),this.oAlert=new s.a(this.welContainer),this.oAppRating=new c.a}return d(t,[{key:"show",value:function(t,i,o,a){"MA"!==e.sDevice&&"MI"!==e.sDevice||e.app.callApp("webview","setWebProperties",'{"isKeyboardResize":true}'),n(window).scrollTop(0),this.bIsModify=t,this.sReviewNo=i,this.sDealType=o,this.sReviewType=a,t?this.showModifyMode(i):(this.showWriteMode(),this.wel.show()),n("body").addClass("review-write")}},{key:"showWriteMode",value:function(){this.wel&&this.wel.remove();this.processRendering({contents:"",dealGpoint:0,deliveryGpoint:0,hasImage:!1})}},{key:"showModifyMode",value:function(e){this.wel&&this.wel.remove(),this.getReviewForModify(e)}},{key:"getReviewForModify",value:function(t){var i=this;n.ajax({url:this.oModule.getApi().getReview.replace("{ReviewNo}",t),data:{useHeader:e.bLogin?"MN":"",useDealInfo:!1},success:function(e){if(!e||!e.data)return alert("존재하지 않는 리뷰입니다."),void i.afterComplete();i.sMainDealSrl=e.data.mainDealNo,i.oImageUpload.setMainDealSrl(e.data.mainDealNo),i.sMainBuySrl=e.data.mainBuyNo,i.sSatisfyPoint=e.data.dealGpoint,i.sDeliveryPoint=e.data.deliveryGpoint,e.data.contents?i.sReviewType="":i.sReviewType="S",e.data.deliveryGpoint>0?i.sDealType="DELIVERY":i.sDealType="",i.processRendering(e.data),i.wel.show(),i.onKeyUp()}})}},{key:"processRendering",value:function(e){this.htRenderData=e,this.render(e),this.renderNotifyPopup(),this.wel=this.welContainer.find(".review_write_area:first"),this.cacheElement(),this.oImageUpload.init(),this.oImageUpload.showIosPhotoAuth(),this.getDealInfo(),this.getDeliveryInfo(),this.getReviewSurveyInfo(),this.setEvent()}},{key:"render",value:function(t){var i='<div class="review_write_area">\n                <div data-role="review_write_toast" class="review_toast_recommend" style="display:none;">\n                    <p class="text">추천해주셔서 감사합니다.</p>\n                </div>\n                <h1 class="review_write_title">리뷰쓰기</h1>\n                '+(e.htReview.isScDeal?Object(r.h)():Object(r.g)())+"\n                "+Object(r.b)()+" "+Object(r.c)(this.sDealType,t.dealGpoint,t.deliveryGpoint)+" "+Object(r.i)(this.sReviewType,t.contents,t.hasImage,t.imageInfo,this.oImageUpload)+" "+Object(r.f)()+'\n                <div class="review_write_info" '+("S"===this.sReviewType?"":'style="display:none;"')+'>\n                    <svg width="14px" height="14px" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_review_info"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="ico_review_info"><g><circle id="Oval" stroke="#959DA6" fill="#FFFFFF" cx="7" cy="7" r="6.5"></circle><g id="Group" transform="translate(6.500000, 3.500000)" fill="#959DA6"><rect id="Rectangle" x="0" y="0" width="1" height="5"></rect><rect id="Rectangle-Copy-2" x="0" y="6" width="1" height="1"></rect></g></g></g></g></svg>\n                    <p class="info_text">리뷰를 등록할 수 없는 상품입니다.<br>과대광고 방지를 위해 만족도만 선택 가능합니다</p>\n                </div>\n                '+Object(r.a)(this.bIsModify)+"\n            </div>";this.welContainer.append(i)}},{key:"renderNotifyPopup",value:function(){this.welContainer.append(Object(r.d)()),this.welNoticePopup=this.welContainer.find("[role=writePopup]")}},{key:"cacheElement",value:function(){this.welSatisfyStar=this.wel.find("._saStar"),this.welSatisfyTitle=this.wel.find("._saTitle"),this.welDeliveryStar=this.wel.find("._deStar"),this.welDeliveryTitle=this.wel.find("._deTitle"),this.welContents=n("#reviewContents"),this.welTextCounter=this.wel.find(".text_count em"),this.welWriteInfo=this.wel.find("._reviewWriteInfo"),this.welUploadImageList=this.wel.find("#_uploadImageList")}},{key:"getDealInfo",value:function(){var e=this;this.oAjaxGetDealInfo&&this.oAjaxGetDealInfo.abort(),this.oAjaxGetDealInfo=n.ajax({type:"POST",contentType:"application/x-www-form-urlencoded; charset=UTF-8",url:this.oModule.getApi().getDealInfo+"?dealNos="+this.sMainDealSrl+"&validationType=NONE",success:function(t){e.oAjaxGetDealInfo=null,t&&t.data&&t.data[0]?(e.htDealInfo=t.data[0],e.wel.find("._reviewWriteTitle").html(e.htDealInfo.titleName),e.htDealInfo.imageInfo?e.wel.find("._reviewImage").css("background-image","url("+(e.htDealInfo.imageInfo.mobile3ColImageUrl?e.htDealInfo.imageInfo.mobile3ColImageUrl:e.htDealInfo.imageInfo.mobileImageUrl)+")"):e.wel.find("._reviewImage").parent().hide()):e.onErrorGetDealInfo()}})}},{key:"onErrorGetDealInfo",value:function(){alert("잠시 후 다시 시도해주세요.")}},{key:"getDeliveryInfo",value:function(){var e=this;this.oAjaxGetDeliveryInfo&&this.oAjaxGetDeliveryInfo.abort(),this.oAjaxGetDeliveryInfo=n.ajax({method:"GET",url:this.oModule.getApi().getDeliveryInfo,data:{main_buy_srl:this.sMainBuySrl},success:function(t){e.oAjaxGetDeliveryInfo=null;var i="",n=0;Object.keys(t.data).forEach((function(o){Object.keys(t.data[o].main_deals[e.sMainDealSrl].buy_deals).forEach((function(a){i+='<li class="_buyOptionItem deal_option_item">\n                                <span class="deal_option_sub">'+t.data[o].main_deals[e.sMainDealSrl].buy_deals[a].buy_option_title+"</span>\n                            </li>",n+=1}))})),e.wel.find("._buyOption").html(i),n>=2?e.wel.find("[role=reviewWriteMore]").show():e.wel.find("[role=reviewWriteMore]").hide()}})}},{key:"getReviewSurveyInfo",value:function(){var e=this;this.oAjaxGetReviewSurveyInfo&&this.oAjaxGetReviewSurveyInfo.abort(),this.oAjaxGetReviewSurveyInfo=n.ajax({method:"GET",url:this.oModule.getApi().reviewSurveyItems.replace("{mainDealNo}",this.sMainDealSrl),success:function(t){if(e.oAjaxGetReviewSurveyInfo=null,t.data.length>0){var i=Object(r.e)(t.data,e.htRenderData);e.wel.find("#_reviewSurvey").append(i).show(),e.htSurveyItems={},Object.keys(t.data).forEach((function(i){e.htSurveyItems[t.data[i].reviewItem.reviewSurveyItemNo]=null,e.htRenderData&&e.htRenderData.reviewSurveyList&&e.htRenderData.reviewSurveyList.forEach((function(t){e.htSurveyItems[t.reviewSurveyItemNo]=t.reviewSurveyItemSelectionNo}))}))}},complete:function(){e.getReviewSurveyFixInfo()}})}},{key:"getReviewSurveyFixInfo",value:function(){var e=this;this.oAjaxGetReviewSurveyFixInfo&&this.oAjaxGetReviewSurveyFixInfo.abort(),this.oAjaxGetReviewSurveyFixInfo=n.ajax({method:"GET",url:this.oModule.getApi().reviewSurveyFixItems,success:function(t){if(e.oAjaxGetReviewSurveyFixInfo=null,t.data.length>0){var i=Object(r.e)(t.data,e.htRenderData);e.wel.find("#_reviewSurvey").append(i).show(),e.htSurveyFixItems={},Object.keys(t.data).forEach((function(i){e.htSurveyFixItems[t.data[i].reviewItem.reviewSurveyItemNo]=null,e.htRenderData&&e.htRenderData.reviewSurveyFixItemList&&e.htRenderData.reviewSurveyFixItemList.forEach((function(t){e.htSurveyFixItems[t.reviewSurveyItemNo]=t.reviewSurveyItemSelectionNo}))}))}}})}},{key:"setEvent",value:function(){var e=this;this.wel.on("click","[role=reviewWriteMore]",this.onClickOpenOption),this.wel.on("click","._saStar",this.onClickSatisfyStar),this.wel.on("click","._deStar",this.onClickDeliveryStar),this.wel.on("click","._surveyItem",this.onClickSurveyItem),this.wel.on("click","[role=showWritePop]",this.showWriteNoticePopup),this.welNoticePopup.on("click","[role=closeWritePop]",this.hideWriteNoticePopup),this.welContents.keyup(this.onKeyUp),this.welContents.on("paste",(function(t){var i=void 0;(i=t.originalEvent.clipboardData?t.originalEvent.clipboardData.getData("text/plain"):window.clipboardData.getData("text")).length>0&&e.onKeyUp(i)})),this.wel.on("click","[role=imgFileBox]",this.onClickImage),this.wel.on("click","[role=removeImage]",this.removeImage),this.welWriteInfo.on("click","button",this.onClickMoreBtn),this.wel.on("click","[role=cancel]",this.onClickCancel),this.wel.on("click","[role=register]",this.onClickRegister)}},{key:"validate",value:function(){var e=this,t={memberSrl:0,accountSrl:0,useHeader:"MN, AS",isMobileProductReview:"Y",contents:this.getStripHtml(this.welContents.val()),imageYn:"N",dealGpoint:this.sSatisfyPoint,deliveryGpoint:this.sDeliveryPoint,whoUpdate:"",uploadImage1:"",uploadImage2:"",uploadImage3:"",uploadImage4:"",reviewSurveyInfo:null},i=this.getRemoveSpaceAndLine(t.contents),o={oButton1:{bIsShow:!0,sContents:"확인"},oButton2:{}};"S"!==this.sReviewType&&(!i||i.length<10||i.length>600)?(o.sTitle="리뷰 글자수를 확인해 주세요.",o.sContents='<p class="contents_text">리뷰는 <span class="bold">한글 기준 10자 이상 600자 미만</span>으로만<br>등록이 가능합니다.</p>'):0===t.dealGpoint?(o.sTitle="리뷰 별점을 확인해 주세요.",o.sContents='<p class="contents_text">상품 만족도 <span class="bold">별점은 1점 이상</span>이어야<br>등록이 가능합니다.</p>'):0===t.deliveryGpoint&&"DELIVERY"===this.sDealType?(o.sTitle="리뷰 별점을 확인해 주세요.",o.sContents='<p class="contents_text">배송 만족도 <span class="bold">별점은 1점 이상</span>이어야<br>등록이 가능합니다.</p>'):(void 0!==this.htSurveyItems&&0!==Object.keys(this.htSurveyItems).filter((function(t){return null===e.htSurveyItems[t]})).length||void 0!==this.htSurveyFixItems&&0!==Object.keys(this.htSurveyFixItems).filter((function(t){return null===e.htSurveyFixItems[t]})).length)&&(o.sTitle="리뷰 설문 항목을 확인해 주세요.",o.sContents='<p class="contents_text">리뷰 설문 항목은 <span class="bold">전부 선택</span>되어야<br>등록이 가능합니다.</p>'),void 0!==this.htSurveyItems&&(t.reviewSurveyInfo=Object.keys(this.htSurveyItems).map((function(t){return t+":"+e.htSurveyItems[t]})).join(",")),void 0!==this.htSurveyFixItems&&(t.reviewSurveyFixInfo=Object.keys(this.htSurveyFixItems).map((function(t){return t+":"+e.htSurveyFixItems[t]})).join(","));var a=this.wel.find("._uploadImage");return a.length&&(t.imageYn="Y",a.each((function(e,i){t["uploadImage"+(e+1)]=n(i).attr("data-img")}))),o.sTitle&&o.sContents?(this.oAlert.setOptions(o),this.oAlert.toggle(),this.oAlert.fBtn1Callback=function(){e.oAlert.toggle(!1)},this.oAlert.fCancelBtnCallback=function(){e.oAlert.toggle(!1)},null):t}},{key:"getStripHtml",value:function(e){return n("<div>").html(e).text()}},{key:"register",value:function(t){var i=this;if(!0!==this.bAjaxRegister){var o=this.oModule.getApi().write.replace("{MainDealSrl}",this.sMainDealSrl).replace("{MainBuySrl}",this.sMainBuySrl);"RELEASE"!==e.sDeployPhase&&(o+="?timeout=5000"),this.bAjaxRegister=!0,this.oAjaxGetDealInfo=n.ajax({method:"POST",url:o,data:t,success:function(t){if(i.bAjaxRegister=!1,!t.data.message||t.data.result)if(i.htOptions.onAfterRegisterReview&&i.htOptions.onAfterRegisterReview(),"PW"===e.sDevice)document.domain="tmon.co.kr",window.opener.toggle_review_button(i.sMainBuySrl,i.sMainDealSrl,!1),window.open("","_self",""),window.close();else{var n=e.util.gup("parentViewType");"giftbox"===n||"delivery"===n?i.alertTicketInfo({type:"changeReviewStatus",mainBuySrl:i.sMainBuySrl,mainDealSrl:i.sMainDealSrl}):i.alertTicketInfo({type:"reloadApp"})}else alert(t.data.message)},error:function(){i.bAjaxRegister=!1,alert("리뷰 등록 중 오류가 발생하였습니다\n잠시 후 다시 시도해주세요.")}})}}},{key:"alertTicketInfo",value:function(e){var t={sTitle:"리뷰 작성이 완료되었습니다.",sContents:this.calculateAlertMessage(),oButton1:{bIsShow:!0,sContents:"확인",color:"orange"},oButton2:{},bIsShowshareArea:!0};this.oAppRating.isShowRequsetAppRating(this.sDealType,this.sSatisfyPoint,this.sDeliveryPoint)&&(t.oButton1={bIsShow:!0,sContents:"아니요",color:"white"},t.oButton2={bIsShow:!0,sContents:"좋아요",color:"orange"}),this.showCompleteAlert(t,e)}},{key:"calculateAlertMessage",value:function(){var e=[];return e.push('<p class="contents_text">\n                관련 정책에 따라 적립금이 지급됩니다.\n                <br>(리뷰 작성 혜택 안내 참조)\n                <br>[마이티몬 > 티몬캐시·적립금]에서\n                <br>적립금 내역을 확인해주세요.\n            </p>'),this.oAppRating.isShowRequsetAppRating(this.sDealType,this.sSatisfyPoint,this.sDeliveryPoint)&&e.push('<div class="write_pop_line"></div>\n            <p class="contents_text"><strong>보다 나은 앱 서비스 제공을 위해<br>티몬 앱에 대한 평가도 남겨주시겠어요?</strong></p>'),e.join("")}},{key:"showCompleteAlert",value:function(e,t){var i=this;this.oAlert.setOptions(e),this.oAlert.toggle(),this.oAppRating.isShowRequsetAppRating(this.sDealType,this.sSatisfyPoint,this.sDeliveryPoint)?(this.oAlert.fBtn1Callback=function(){i.oAppRating.saveResponseToAppRating(!1),i.oAlert.toggle(!1),i.complete(i.sReviewNo,t)},this.oAlert.fBtn2Callback=function(){i.oAppRating.saveResponseToAppRating(!0),i.oAlert.toggle(!1),i.complete(i.sReviewNo,t),i.oAppRating.gotoMarket()}):this.oAlert.fBtn1Callback=function(){i.oAlert.toggle(!1),i.complete(i.sReviewNo,t)},this.oAlert.fCancelBtnCallback=function(){i.oAlert.toggle(!1),i.complete(i.sReviewNo,t)}}},{key:"modify",value:function(t){var i=this;!0!==this.bAjaxmodify&&(this.bAjaxmodify=!0,this.oAjaxGetDealInfo=n.ajax({method:"POST",url:this.oModule.getApi().modify.replace("{ReviewNo}",this.sReviewNo).replace("{MainDealSrl}",this.sMainDealSrl).replace("{MainBuySrl}",this.sMainBuySrl),data:t,success:function(t){i.bAjaxmodify=!1,t.data.message?alert(t.data.message):(i.oModule.getReviewUpdate(i.sReviewNo),i.htOptions.onAfterModifyReview&&i.htOptions.onAfterModifyReview(),i.htOptions.onUpdateReview?i.getReviewForUpdate(i.sReviewNo):i.afterComplete(i.sReviewNo),"PW"===e.sDevice&&(document.domain="tmon.co.kr",window.opener.toggle_review_button(i.sMainBuySrl,i.sMainDealSrl,!1),window.open("","_self",""),window.close()))},error:function(){i.bAjaxmodify=!1,alert("리뷰 수정 중 오류가 발생하였습니다\n잠시 후 다시 시도해주세요.")}}))}},{key:"getReviewForUpdate",value:function(t){var i=this;n.ajax({url:this.oModule.getApi().getReview.replace("{ReviewNo}",t),data:{useHeader:e.bLogin?"MN":"",useDealInfo:!1},success:function(e){e&&e.data?(i.htOptions.onUpdateReview(e.data),i.afterComplete()):i.afterComplete()}})}},{key:"afterComplete",value:function(t){var i=this;this.bIsModify&&"PW"!==e.sDevice?(this.oAlert.setOptions({sTitle:"작성하신 리뷰가 수정되었습니다.",sContents:"",oButton1:{bIsShow:!0,sContents:"확인"},oButton2:{}}),this.oAlert.toggle(),this.oAlert.fBtn1Callback=function(){i.oAlert.toggle(!1),i.complete(t)},this.oAlert.fCancelBtnCallback=function(){i.oAlert.toggle(!1),i.complete(t)}):this.bIsModify&&this.complete(t)}},{key:"complete",value:function(e,t){if(this.oModule.getPrevView()&&e){var i=this.oModule.getPrevView();return this.oModule.reset(),this.oModule.show(i,e),void this.hide()}this.htOptions.onCloseReview&&this.htOptions.onCloseReview(t),this.oModule.reset()}},{key:"hide",value:function(){"MA"!==e.sDevice&&"MI"!==e.sDevice||e.app.callApp("webview","setWebProperties",'{"isKeyboardResize":false}'),n("body").removeClass("review-write"),this.wel&&this.wel.remove()}},{key:"showToast",value:function(t){this.wel&&"PW"!==e.sDevice&&(this.wel.find("[data-role=review_write_toast]").stop().find(".text").html(t),this.wel.find("[data-role=review_write_toast]").show().delay(2e3).fadeOut("slow"))}}]),t}();t.a=u}).call(this,i(23),i(49))},139:function(e,t,i){"use strict";(function(e,n,o){var a=i(56),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var r=function(){function t(i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.onClickUploadImage=function(t){if(n.welUploadImageList.find("._uploadImage").length>=n.MAX_IMAGE_COUNT)return alert(n.MAX_IMAGE_MSG),void t.preventDefault();"MA"===e.sDevice&&(n.onClickFileUploadAndroid(),t.preventDefault())},this.MAX_IMAGE_COUNT=4,this.MAX_IMAGE_RESOLUTION=1080,this.MAX_IMAGE_MSG="사진은 최대 4장까지 등록 가능합니다.",this.bAndroidMultiFlag=!0,this.sMainDealSrl=e.util.gup("mainDealSrl"),this.welContainer=i,this.hasOrientation=!1,this.setCavasToBolbPolyfill()}return s(t,[{key:"init",value:function(){this.cacheElement(),this.setEvent(),this.setUploadImage(),this.hasOrientationMetaData()}},{key:"cacheElement",value:function(){this.welImageUpload=this.welContainer.find("#_reviewImageUploadForm"),this.welUploadImageList=this.welContainer.find("#_uploadImageList"),this.welUploadLoading=this.welContainer.find("#_uploadRLoading"),this.welUploadImage=this.welContainer.find("#_uploadRImage"),this.welAuthLayer=n("._access_pop"),this.welCameraAuthLayer=n("#access_agree_pop_camera"),this.welPictureAuthLayer=n("#access_agree_pop_picture"),this.welCamPicAuthLayer=n("#access_agree_pop")}},{key:"setEvent",value:function(){var t=this;this.welImageUpload.find(".input_file").on("click",this.onClickUploadImage),this.welImageUpload.find(".input_file").on("change",(function(i){var n=Array.from(i.currentTarget.files);n.length+t.welUploadImageList.find("._uploadImage").length>t.MAX_IMAGE_COUNT?"MI"===e.sDevice?e.app.callApp("webview","showAlert",t.MAX_IMAGE_MSG,"확인"):alert(t.MAX_IMAGE_MSG):n.forEach((function(e){return t.uploadImage(e)}))})),this.welAuthLayer.on("click","a",(function(){return t.welAuthLayer.hide(),!1}))}},{key:"hasOrientationMetaData",value:function(){var e=this,t=document.createElement("img");t.onload=function(){e.hasOrientation=2===t.width&&3===t.height},t.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="}},{key:"showIosPhotoAuth",value:function(){var t=this;if(!1!==e.bMobile){var i=e.util.getIOSVersion();i&&this.welAuthLayer.length&&(window.cbRequestPhotoAuth=function(e){var n=JSON.parse(e);i[0]>10&&!n.camera?t.welCameraAuthLayer.show():n.photo||n.camera?!n.photo&&n.camera?t.welPictureAuthLayer.show():n.photo&&!n.camera&&t.welCameraAuthLayer.show():t.welCamPicAuthLayer.show()},e.app.callApp("webview","requestPhotoAuthorization","cbRequestPhotoAuth"))}}},{key:"setMainDealSrl",value:function(e){this.sMainDealSrl=e}},{key:"onClickFileUploadAndroid",value:function(){var t=this;this.bAndroidMultiFlag=!0,e.app.callApp("upload","uploadImage","window.cbUploadImageReviewFromApp"),this.showImageLoading(),window.cbUploadImageReviewFromApp=function(i){if(t.hideImageLoading(),i&&t.bAndroidMultiFlag){var o=t.welUploadImageList.find("._uploadImage").length;if(o>=t.MAX_IMAGE_COUNT&&t.bAndroidMultiFlag)return alert(t.MAX_IMAGE_MSG),void(t.bAndroidMultiFlag=!1);var a=JSON.parse(i);"Fail"!==a.success?o<t.MAX_IMAGE_COUNT&&(t.welUploadLoading.before(t.renderImage(a.result.message)),setTimeout((function(){o=t.welUploadImageList.find("._uploadImage").length,n(".review_write_out .cnt, .review_write_header .cnt").text(o),o>3&&(n("#_uploadRImage .input_file").attr("disabled",!0),"PW"===e.sDevice&&n("#_uploadRImage").hide())}),0)):alert(a.error.message)}}}},{key:"uploadImage",value:function(e){var t=e.name.split(".").pop().toLowerCase();if(!["gif","png","jpg","jpeg"].includes(t))return alert(t+" 확장자는 업로드 가능한 이미지 파일이 아닙니다."),void this.welImageUpload.find(".input_file").val("");this.showImageLoading();try{this.rotateImage(e)}catch(e){alert("업로드를 실패했습니다. 다시 시도해주세요.")}}},{key:"rotateImage",value:function(e){var t=this,i=new FileReader;i.onload=function(i){var n=new Image;n.onload=function(){var i=document.createElement("canvas"),o=n.width,a=n.height;o>a?o>t.MAX_IMAGE_RESOLUTION&&(a*=t.MAX_IMAGE_RESOLUTION/o,o=t.MAX_IMAGE_RESOLUTION):a>t.MAX_IMAGE_RESOLUTION&&(o*=t.MAX_IMAGE_RESOLUTION/a,a=t.MAX_IMAGE_RESOLUTION),i.width=o,i.height=a,i.getContext("2d").drawImage(n,0,0,o,a);var s=new MegaPixImage(n);return t.getImageOrientation(e,(function(n){var r=t.hasOrientation?{}:{orientation:n},l=Object.assign(r,{width:o,height:a});s.render(i,l),i.toBlob((function(i){t.proceedUploadImage(i,e)}),e.type)})),!1},n.src=i.target.result},i.readAsDataURL(e)}},{key:"proceedUploadImage",value:function(e,t){var i=this,o=new FormData;o.append("Filedata",e),o.append("file_name",(new Date).getTime()+"_"+(t?t.name:"uploadedImg")),n.ajax({url:"/api/review/upload/"+this.sMainDealSrl,data:o,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){i.onSuccessImageUpload(e)},error:function(){i.onFailImageUpload()}})}},{key:"getImageOrientation",value:function(e,t){EXIF.getData(e,(function(){return t(EXIF.getAllTags(e).Orientation)}))}},{key:"setUploadImage",value:function(){var e=this;this.welImageUpload.ajaxForm({url:"/api/review/upload/"+this.sMainDealSrl,enctype:"multipart/form-data",dataType:"json",success:function(t){e.onSuccessImageUpload(t)},error:function(){e.onFailImageUpload()}})}},{key:"onFailImageUpload",value:function(){alert("파일 업로드에 실패하였습니다.\n잠시 후 다시 시도해 주세요."),this.hideImageLoading(),this.welImageUpload.find(".input_file").val("")}},{key:"onSuccessImageUpload",value:function(t){var i=this;if(this.hideImageLoading(),!0===t.data.result){this.welUploadLoading.before(this.renderImage(t.data.imagePath));var o=0;setTimeout((function(){o=i.welUploadImageList.find("._uploadImage").length,n(".review_write_out .cnt, .review_write_header .cnt").text(o),o>3&&(n("#_uploadRImage .input_file").attr("disabled",!0),"PW"===e.sDevice&&n("#_uploadRImage").hide()),i.welImageUpload.find(".input_file").val("")}),0)}else alert("파일 업로드에 실패하였습니다.\n잠시 후 다시 시도해 주세요.")}},{key:"setCavasToBolbPolyfill",value:function(){HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){var n=this.toDataURL(t,i),a=/^data:(.*?);base64,(.*)$/.exec(n),s=a[1],r=a[2];setTimeout((function(){e(new Blob([new Uint8Array(o.atob(r).split("").map((function(e){return e.charCodeAt(0)})))],{type:s}))}),0)},writable:!0,enumerable:!0,configurable:!0})}},{key:"showImageLoading",value:function(){this.welUploadLoading.show(),this.welUploadImage.hide()}},{key:"hideImageLoading",value:function(){this.welUploadLoading.hide(),this.welUploadImage.show()}},{key:"renderImage",value:function(e){var t=Object(a.b)(e);return'<li class="review_write_item _uploadImage" data-img="'+Object(a.a)(e)+'">\n                <div class="img_file_box" role="imgFileBox" style="background-image: url(\''+t+'\')">\n                    <button type="button" role="removeImage" class="img_file_del" aria-label="이미지 삭제"><svg width="26px" height="26px" viewBox="0 0 26 26" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="btn_img_del"><g><rect id="Rectangle" fill="#000000" opacity="0.800000012" x="0" y="0" width="26" height="26"></rect><path d="M17.2857143,8 L18,8.71428571 L13.714,13 L18,17.2857143 L17.2857143,18 L13,13.714 L8.71428571,18 L8,17.2857143 L12.285,13 L8,8.71428571 L8.71428571,8 L13,12.285 L17.2857143,8 Z" id="Combined-Shape" fill="#FFFFFF" fill-rule="nonzero"></path></g></g></g></svg></button>\n                </div>\n            </li>'}}]),t}();t.a=r}).call(this,i(23),i(49),i(72))},140:function(e,t,i){"use strict";(function(e){var n=i(141),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.welContainer=e,this.fCancelBtnCallback=new Function,this.fBtn1Callback=new Function,this.fBtn2Callback=new Function,this.snsShareObj=null,this.init()}return o(t,[{key:"init",value:function(){this.renderAlert(),this.cacheElement(),this.setEvent()}},{key:"cacheElement",value:function(){this.welCloseButton=this.welAlert.querySelector(".btn_pop_close"),this.welTitle=this.welAlert.querySelector("h4"),this.welContents=this.welAlert.querySelector(".write_pop_contents"),this.welButton1=this.welAlert.querySelector("#_button1"),this.welButton2=this.welAlert.querySelector("#_button2"),this.welShareArea=this.welAlert.querySelector("#_share_on_review")}},{key:"setEvent",value:function(){var e=this;this.welCloseButton.addEventListener("click",(function(){e.fCancelBtnCallback()})),this.welButton1.addEventListener("click",(function(){e.fBtn1Callback()})),this.welButton2.addEventListener("click",(function(){e.fBtn2Callback()}))}},{key:"checkSmsShareAvailableInIos",value:function(){return!(!e.bIsMobileWeb&&e.bIsIos&&!e.app._isValidAppVersion("5.1.3"))||(this.welShareArea.querySelector(".sms").addEventListener("click",(function(){alert("티몬 앱 버전이 낮습니다. 업데이트를 실행해주세요")})),!1)}},{key:"toggle",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.welAlert.style.display=e?"block":"none"}},{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sTitle:"",sContents:"",oButton1:{bIsShow:!1,sContents:""},oButton2:{bIsShow:!1,sContents:""},bIsShowshareArea:!1};this.welTitle.innerHTML=e.sTitle,this.welContents.innerHTML=e.sContents,this.welButton1.style.display=e.oButton1.bIsShow?"block":"none",this.welButton1.innerHTML=e.oButton1.sContents,e.oButton1&&("white"===e.oButton1.color?this.welButton1.classList.add("white"):this.welButton1.classList.remove("white")),this.welButton2.style.display=e.oButton2.bIsShow?"block":"none",this.welButton2.innerHTML=e.oButton2.sContents,e.oButton2&&("white"===e.oButton2.color?this.welButton2.classList.add("white"):this.welButton2.classList.remove("white")),this.welShareArea.style.display=e.bIsShowshareArea?"block":"none",e.bIsShowshareArea&&!this.snsShareObj&&this.setSnsShare()}},{key:"setSnsShare",value:function(){var t=e.oModuleReview.oWrite,i=t.htDealInfo,o=i.priceInfo.price,a=i.titleImage,s=i.subTitleImage,r=i.contentInfo.contentImages.frontImages,l=i.isDelegatePriceOver,c=t.sMainDealSrl,d={sContent:o?e.util.numberFormat(o)+"원"+(l?"~":""):s,sUrl:e.htCommonUrl.www_m_dealDetail+"/"+c,sHashTags:"티몬",sSelector:"#_share_on_review button"+(this.checkSmsShareAvailableInIos()?"":":not(.sms)"),sDealNo:c,sImage:r&&r[0]?r[0]:"",sTitle:a?"[타임커머스 티몬] "+a:"",cbOnCompleted:function(t){"app"!==e.view_mode&&"urlcopy"===t[0]&&(Object(n.a)(d.sUrl)?alert("클립보드에 복사되었습니다.\n공유하고 싶은 곳에 붙여넣기 하세요"):alert("URL 복사를 지원하지 않는 브라우저입니다. 상단 주소창의 URL 을 복사해 공유해 주세요!"))}};this.snsShareObj=new SnsShare(d)}},{key:"renderAlert",value:function(){this.welContainer.append('<div class="write_pop_wrap" id="_alertPop" style="display: none;">\n                <article class="write_pop_article">\n                    <div class="write_pop_header type2">\n                        <h4></h4>\n                        <button type="button" class="btn_pop_close"><span class="blind">닫기</span></button>\n                    </div>\n                    <div class="write_pop_contents"></div>\n                    <div class="write_pop_footer">\n                        <button type="button" id="_button1" class="btn_pop_button" style="display:none;"></button>\n                        <button type="button" id="_button2" class="btn_pop_button" style="display:none;"></button>\n                    </div>\n                    <div id="_share_on_review" class="write_pop_share">\n                        <h4>이 상품을 공유해보세요!</h4>\n                        <ul class="icon_list">\n                            <li class="icon_list_item">\n                                <button type="button" class="icon_list_button kakao" aria-label="카카오톡으로 공유하기" data-type="kakaotalk" tl:area="RCDS" tl:ord=1></button>\n                            </li>\n                            <li class="icon_list_item">\n                                <button type="button" class="icon_list_button facebook" aria-label="페이스북으로 공유하기" data-type="facebook" tl:area="RCDS" tl:ord=2></button>\n                            </li>\n                            <li class="icon_list_item">\n                                <button type="button" class="icon_list_button sms" aria-label="문자로 공유하기" data-type="sms" tl:area="RCDS" tl:ord=3></button>\n                            </li>\n                            <li class="icon_list_item">\n                                <button type="button" class="icon_list_button url" aria-label="URL로 공유하기" data-type="urlcopy"  tl:area="RCDS" tl:ord=4></button>\n                            </li>\n                        </ul>\n                    </div>\n                </article>\n            </div>'),this.welAlert=this.welContainer.find("#_alertPop").get(0)}}]),t}();t.a=a}).call(this,i(23))},141:function(e,t,i){"use strict";t.a=function(e){var t=document.createElement("textarea"),i=!1;return t.value=e,document.body.appendChild(t),t.select(),document.execCommand&&document.execCommand("copy")&&(i=!0),document.body.removeChild(t),i}},142:function(e,t,i){"use strict";(function(e){var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var n=Date.now(),o=JSON.parse(localStorage.getItem("REQUSET_APP_RATING_KEY")),a=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"isShowRequsetAppRating",value:function(t,i,a){var s=!e.bIsMobileWeb&&(e.bIsAndroid||e.bIsIos),r=this.isGreaterScore(5,t,i,a);return s&&r&&(null===o||!0===o.answer&&n-o.date>2592e6||!1===o.answer&&n-o.date>432e6)}},{key:"isGreaterScore",value:function(e,t,i,n){return"DELIVERY"===t&&parseInt(i,10)>=e&&parseInt(n,10)>=e||"DELIVERY"!==t&&parseInt(i,10)>=e}},{key:"saveResponseToAppRating",value:function(e){localStorage.setItem("REQUSET_APP_RATING_KEY",JSON.stringify({answer:e,date:n}))}},{key:"gotoMarket",value:function(){e.bIsAndroid&&window.open("market://details?id=com.tmon","_blank").focus();e.bIsIos&&window.open("itms-apps://itunes.apple.com/app/id463434588","_blank").focus()}}]),t}();t.a=a}).call(this,i(23))},143:function(e,t,i){i(349),e.exports=i(347)},144:function(e,t,i){i.p=window.TMON.webpackPublicPath},23:function(e,t){e.exports=TMON},24:function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"e",(function(){return r})),i.d(t,"i",(function(){return l})),i.d(t,"f",(function(){return u})),i.d(t,"a",(function(){return h})),i.d(t,"d",(function(){return p})),i.d(t,"h",(function(){return c})),i.d(t,"g",(function(){return d}));var n=i(50),o=function(){return'<div class="review_write_box">\n        <h3 class="blind">구매상품 정보</h3>\n        <div class="deal_option_info">\n            <div class="deal_option_thumb">\n                <span class="_reviewImage deal_option_img"></span>\n            </div>\n            <div class="deal_option_text">\n                <strong class="_reviewWriteTitle deal_option_title"></strong>\n                \n                <div data-role="reviewWriteOption" class="deal_option_box">\n                    <ul class="_buyOption deal_option_list"></ul>\n                    \n                    <button type="button" role="reviewWriteMore" class="btn_open" aria-label="구매옵션 펼쳐보기">\n                        <span class="blind">구매옵션 펼쳐보기</span>\n                        \x3c!--<span class="blind">구매옵션 접기</span>--\x3e\n                        <svg width="11px" height="6px" viewBox="0 0 11 6" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_open_arrow"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="pc_btn_open_op" fill="#979EA7" fill-rule="nonzero"><polygon transform="translate(5.500000, 3.000000) rotate(-180.000000) translate(-5.500000, -3.000000) " points="5.5 1.4 0.723 6 0 5.3 4.777 0.7 5.5 0 11 5.3 10.277 6"></polygon></g></g></svg>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>'},a=function(e,t){for(var i="",n=1;n<=5;n+=1)i+='<button type="button" class="btn_star_score '+e+" "+(t>=n?"on":"")+'" value="'+n+'"></button>';return i},s=function(e,t,i){return'<div class="review_write_input">\n        <h2 class="review_write_title type2">상품 평가하기</h2>\n        <div class="review_write_rate">\n            '+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return'<h3 class="blind">구매상품 평점</h3>\n    <div class="star_score">\n        <div class="star_score_box">\n            <strong class="review_write_title type2">상품 만족도</strong>\n            <div class="star_score_bind">\n                '+a("_saStar",t)+'\n                <span class="star_score_text _saTitle '+(0!==t?"on":"")+'">'+n.a[t]+'</span>\n            </div>\n        </div>\n        <div class="star_score_box" style="'+("DELIVERY"===e?"":"display:none;")+'">\n            <strong class="review_write_title type2">배송 만족도</strong>\n            <div class="star_score_bind">\n                '+a("_deStar",i)+'\n                <span class="star_score_text _deTitle '+(0!==i?"on":"")+'">'+n.a[i]+"</span>\n            </div>\n        </div>\n    </div>"}(e,t,i)+'\n            \n            <section id="_reviewSurvey" class="review_input" style="display:none;">\n                <h1 class="blind">상품 평가항목</h1>\n            </section>\n        </div>\n    </div>'};var r=function(e,t){var i="";return Object.keys(e).forEach((function(n){i+='<div class="review_input_area">\n                <span class="review_write_title type2" data-question-idx="'+e[n].reviewItem.reviewSurveyItemNo+'">\n                    '+function(e){if(!e)return"";var t,i="는";return((t=e).charCodeAt(t.length-1)-44032)%28>0&&(i="은"),"<span class='notice'>"+e+"</span>"+i+" 어떤가요?"}(e[n].reviewItem.keyword)+'\n                </span>\n                <ul class="review_input_list">',Object.keys(e[n].selections).forEach((function(o){var a=!1;t&&t.reviewSurveyList&&(a=t.reviewSurveyList.some((function(t){return t.reviewSurveyItemSelectionNo===e[n].selections[o].reviewSurveyItemSelectionNo}))),t&&t.reviewSurveyFixItemList&&(a=a||t.reviewSurveyFixItemList.some((function(t){return t.reviewSurveyItemSelectionNo===e[n].selections[o].reviewSurveyItemSelectionNo}))),i+=function(e,t,i,n,o,a){return'<li class="review_input_item">\n        <div class="review_input_bind">\n            <input type="radio" name="'+e+'" id="'+n+'" data-question-idx="'+t+'" data-fix-use="'+("Y"===o)+'" value="'+n+'" class="_surveyItem review_input_type" '+(a?"checked":"")+'>\n            <label for="'+n+'" class="review_input_label">\n                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" class="ico_circle_input"><g fill="none" fill-rule="evenodd"><circle cx="15" cy="15" r="15" fill="#DFE2E6"></circle><path stroke="#FFF" stroke-width="2" d="M9.375 14.094l4.788 4.656 7.712-7.5" opacity=".5"></path></g></svg>\n                <span class="text">'+i+"</span>\n            </label>\n        </div>\n    </li>"}(e[n].reviewItem.keyword,e[n].reviewItem.reviewSurveyItemNo,e[n].selections[o].selection,e[n].selections[o].reviewSurveyItemSelectionNo,e[n].reviewItem.fixUse,a)})),i+="</ul></div>"})),i},l=function(t,i,n,o,a){return'<section class="review_write_out" '+("S"===t?'style="display:none;"':"")+">\n        "+function(e){return'<div class="review_write_header">\n        <h1 class="review_write_title type2">리뷰 작성하기</h1>\n        <span class="text_count"><em>0</em>/600</span>\n        <button type="button" role="showWritePop" class="btn_notice"><svg width="14px" height="14px" viewBox="0 0 14 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_review_info"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="ico_review_info"><g><circle id="Oval" stroke="#959DA6" fill="#FFFFFF" cx="7" cy="7" r="6.5"></circle><g id="Group" transform="translate(6.500000, 3.500000)" fill="#959DA6"><rect id="Rectangle" x="0" y="0" width="1" height="5"></rect><rect id="Rectangle-Copy-2" x="0" y="6" width="1" height="1"></rect></g></g></g></g></svg>작성시 유의사항</button>\n    </div>\n    \n    <div class="review_write_textarea">\n        \n        <textarea id="reviewContents" title="구매후기 작성" name="reviewContents" maxlength="600">'+e+'</textarea>\n        \n        <div class="review_write_placeholder">\n            <ul class="placeholder_list">\n                <li class="placeholder_item"><span class="text">리뷰는 최소 10자 이상 입력해 주세요.<br>사진은 최대 4장까지 등록 가능합니다.</span></li>\n                <li class="placeholder_item"><span class="text">상품과 무관하거나 스팸, 불법적인 내용의 리뷰는 통보없이 비노출 처리될 수 있습니다.</span></li>\n            </ul>\n        </div>\n    </div>'}(i)+"\n        "+function(t,i,n){return'<div class="review_write_header">\n        <h2 class="review_write_title type2">이미지 등록</h2>\n        <span class="text_count"><span class="cnt">'+(!0===t&&i?i.image.length:0)+'</span>/4</span>\n    </div>\n    <div class="review_write_image">\n        <form method="post" id="_reviewImageUploadForm" enctype="multipart/form-data">\n            <ul id="_uploadImageList" class="review_write_list">\n                '+(!0===t&&i?i.image.map((function(e){return n.renderImage(e)})).join(""):"")+'\n                <li id="_uploadRLoading" class="review_write_item" style="display:none">\n                    <div class="img_file_box" style="background-image: url(\'\')">\n                        <span class="loading"><span class="blind">이미지 업로드중</span></span>\n                    </div>\n                </li>\n            </ul>\n            <div id="_uploadRImage" class="img_file_button">\n                \n                <input type="file" name="uploadFile" class="input_file" accept="image/*"\n                    '+("PW"===e.sDevice||"MW"===e.sDevice||"MA"===e.sDevice||"MI"===e.sDevice&&e.app._isValidAppVersion("4.8.7")?"multiple":"")+" "+(!0===t&&i&&4===i.image.length?"disabled":"")+'>\n                <span class="input_file_text">\n                    <svg width="19px" height="16px" viewBox="0 0 19 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_camera"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="ico_camera" stroke="#F27935"><g><path d="M12.5569995,0.5 L6.44300047,0.5 C6.23457819,0.5 6.04801783,0.629286417 5.97472189,0.824741949 L5.34526022,2.5 L2,2.5 C1.17157288,2.5 0.5,3.17157288 0.5,4 L0.5,14 C0.5,14.8284271 1.17157288,15.5 2,15.5 L17,15.5 C17.8284271,15.5 18.5,14.8284271 18.5,14 L18.5,4 C18.5,3.17157288 17.8284271,2.5 17,2.5 L13.6534998,2.5 L13.0251641,0.824438279 C12.9519822,0.629286417 12.7654218,0.5 12.5569995,0.5 Z" id="Combined-Shape"></path><g id="Group-13" transform="translate(6.000000, 5.000000)"><line x1="3.5" y1="-1.13659082e-13" x2="3.5" y2="7" id="Path-4"></line><line x1="7" y1="3.5" x2="2.27318164e-13" y2="3.5" id="Path-4-Copy"></line></g></g></g></g></svg>\n                    사진 추가 (<span class="cnt">'+(!0===t&&i?i.image.length:"0")+"</span>/4)\n                </span>\n            </div>\n        </form>\n    </div>"}(n,o,a)+"\n    </section>"},c=function(){return e.bMobile?'<p class="review_write_sub single_deal"><span class="point_color_orange f_bold">포토리뷰 50원, </span><span class="f_bold">일반 리뷰 20원</span> 적립금 지급</p>':'<p class="review_write_sub single_deal">이 상품으로 받을 수 있는 리뷰 적립금은 <span class="point_color_orange f_bold">포토리뷰 50원, </span><span class="f_bold">일반리뷰 20원</span>입니다.</p>'},d=function(){return e.bMobile?'<p class="review_write_sub">일반/포토리뷰 <span class="point_color_orange f_bold">10원</span> 적립금 지급</p>':'<p class="review_write_sub">이 상품으로 받을 수 있는 리뷰 적립금은 <span class="point_color_orange f_bold">10원</span>입니다.</p>'},u=function(){return'<section class="_reviewWriteInfo review_write_notice">\n        <h1 class="review_write_title type2">리뷰 작성시 혜택 안내</h1>\n        <ul class="info_dot_list">\n        '+(e.htReview.isScDeal?'<li class="info_dot_item"><span class="text"><span class="f_bold">상품별 최초 1회에 한해 포토리뷰 <span class="point_color_orange">50원</span>, 일반 리뷰 <span class="point_color_orange">20원</span> 작성 즉시 지급</span></span></li>':'<li class="info_dot_item"><span class="text"><span class="f_bold">상품별 최초 1회에 한해 일반/포토리뷰 작성 시 <span class="point_color_orange">10원</span> 즉시 지급</span></span></li>')+'\n            <li class="info_dot_item"><span class="text">리뷰 작성 적립금은 <span class="f_bold">적립일 기준 <span class="point_color_orange">180일 이내 사용</span></span> 가능</span></li>\n            <li class="info_dot_item"><span class="text">주문별로 리뷰 작성 가능(적립금은 동일 상품별 1회 지급)</li>\n            <li class="info_dot_item"><span class="text">배송상품 : <span class="f_bold">리뷰 작성 후 적립금 즉시 지급</span></span></li>\n            <li class="info_dot_item"><span class="text">지역, 티켓, 여행상품 : <span class="f_bold">최소 1회이상 사용완료 후 리뷰 작성 및 적립금 지급</span></span></li>\n            <li class="info_dot_item"><span class="text"><span class="f_bold">리뷰 삭제 후 재작성시 적립금 지급되지 않음</span></span></li>\n            <li class="info_dot_item"><span class="text"><span class="f_bold">리뷰 작성 후 해당 주문 취소시 지급된 적립금 회수</span></span></li>\n            <li class="info_dot_item"><span class="text">당사의 상품 리뷰 운영원칙 및 관련법령에 위반되는 경우 작성자에게 사전 통보 없이 비노출 처리</span></li>\n            <li class="info_dot_item"><span class="text"><span class="point_color_orange f_bold">2019년 7월 17일 이후</span> 주문 건부터 적립금 지급</span></li>\n            <li class="info_dot_item"><span class="text">0원, 이벤트 상품은 적립금 지급 대상에서 제외</span></li>\n        </ul>\n        <button type="button" class="btn_review_wide">\n            <span class="text">더보기</span>\n            <svg width="11px" height="6px" viewBox="0 0 11 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_btn_arrow"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="btn_open" fill="#B7BFC8" fill-rule="nonzero"><polygon transform="translate(5.500000, 3.000000) rotate(-180.000000) translate(-5.500000, -3.000000) " points="5.5 1.4 0.723 6 0 5.3 4.777 0.7 5.5 0 11 5.3 10.277 6"></polygon></g></g></svg>\n        </button>\n    </section>'},h=function(e){return'<div class="review_write_btn">\n        <button type="button" role="cancel" class="btn_review">취소</button>\n        <button type="button" role="register" class="btn_review fill">'+(e?"수정":"등록")+"</button>\n    </div>"},p=function(){return'<div role="writePopup" class="write_pop_wrap" style="display: none">\n        <article class="write_pop_article">\n            <div class="write_pop_header">\n                <h4>리뷰 작성시 유의사항</h4>\n                <button type="button" role="closeWritePop" class="btn_close" aria-label="레이어 닫기"><svg width="15px" height="15px" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_x"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="ico_closed_btn" fill="#959DA6"><polygon points="14.293 0 7.5 6.794 0.705 0 -8.8817842e-16 0.706 6.792 7.5 -8.8817842e-16 14.294 0.705 15 7.5 8.206 14.293 15 15 14.294 8.205 7.5 15 0.706"></polygon></g></g></svg></button>\n            </div>\n            <div class="write_pop_contents">\n                <ol class="contents_list">\n                    <li>리뷰 내용과 사진은 티몬에서 거래되는 상품의 판촉, 홍보 등을 위하여 복제, 배포, 전송, 전시 등에 이용 될 수 있습니다.</li>\n                    <li>리뷰 내용 또는 사진이 아래의 내용에 해당하는 경우에는 작성자에게 통보 없이 비공개 처리되거나 민/형사상의 책임이 따를 수 있습니다.\n                        <ul class="contents_list_sub">\n                            <li>상품과 관계없는 내용 또는 이미지, 비방, 무의미한 단어반복, 허위의 사실 유포 등 다른 회원 또는 회사의 영업을 방해하는 경우</li>\n                            <li>저작권, 초상권 등 타인의 권리 혹은 개인정보(신용카드번호, 전화번호 등)의 침해 우려가 있는 경우</li>\n                            <li>특정 성분의 효능에 있어 오해의 소지가 있는 경우</li>\n                            <li>기타 관계법령에 위반되는 경우</li>\n                        </ul>\n                    </li>\n                </ol>\n            </div>\n        </article>\n    </div>'}}).call(this,i(23))},347:function(e,t,i){"use strict";i.r(t),function(e,n){i(348);var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var a=function(){function t(){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.onCloseLayer=function(){window.history.back()},this.onChangeReportType=function(t){4===parseInt(e(t.currentTarget).val(),10)?i.welReportComment.show():i.welReportComment.hide()},this.submitReport=function(t){var n=e("input[name=reportType]:checked").val();if(!n)return alert("신고 사유를 선택해 주세요."),void t.preventDefault();var o="4"===n?e("#_reportInputComment").val():"";i.doReport(n,o),"PW"===i.getPlatform()?e("[data-role=close]").trigger("click"):window.history.back(),t.preventDefault()},this.bIsNeedReloadAppList=!1,this.sReviewPageTitle=n.util.gup("title")?decodeURIComponent(n.util.gup("title")):"리뷰 상세보기","true"!==n.htReview.sErrorStatus?(this.initModule(),this.setPageParam(),this.cacheElement(),this.setEvent(),this.runStorageAction()):this.showError()}return o(t,[{key:"showError",value:function(){alert(n.htReview.sErrorMessage),"MA"===n.sDevice&&n.app.callApp("webview","closeWebView",!1)}},{key:"setGaParameter",value:function(){switch(n.util.gup("from")){case"myReview":this.sGaPrefix="내리뷰상세";break;case"likeReview":this.sGaPrefix="좋아요한리뷰상세";break;default:this.sGaPrefix="내리뷰상세"}}},{key:"setPageParam",value:function(){switch(n.htReview.sFrom){case"view":this.setGaParameter(),this.getReview();break;case"write":n.oModuleReview.show("write",null,n.htReview.dealType,n.htReview.reviewType),this.sGaPrefix="리뷰쓰기";break;case"modify":n.oModuleReview.show("modify",n.util.gup("reviewNo")),this.sGaPrefix="리뷰수정";break;default:this.setGaParameter(),this.getReview()}}},{key:"cacheElement",value:function(){this.welReportComment=e("#_reportInputComment"),this.welPopWrap=e("#_popWrap"),this.welReview=this.welPopWrap.find(".review_pop:first")}},{key:"setEvent",value:function(){var t=this;this.welReview.on("change","input[name=reportType]",this.onChangeReportType),this.welReview.on("click","button[data-role=close]",this.onCloseLayer),this.welReview.on("submit","#reportReview",this.submitReport),e("#_goBack").on("click",(function(){n.app.callApp("webview","closeWebView",!1)})),e("#_retry").on("click",(function(){t.getReview()})),e(window).on("hashchange",(function(){t.onChangeHash()})),this.onChangeHash()}},{key:"getPlatform",value:function(){return"PW"===n.sDevice?"PW":"app"===n.view_mode?"MA":"MW"}},{key:"onChangeHash",value:function(){var e=n.util.getHashJSON();if(this.hideLayer(),void 0!==e.layer)switch(e.layer){case"report":this.openReportReviewLayer()}}},{key:"doReport",value:function(t,i){e.ajax({method:"POST",url:n.htReview.htAPI.reportReview.replace("{reviewNo}",this.nReportReviewNo),data:{reportReason:t,reportContent:i,partnerYn:"N",useParam:"S"},success:function(e){e.data.result?alert("신고해 주셔서 감사합니다.\n신고 내용은 이용약관 및 정책에 의해 처리됩니다."):alert(e.data.message)},error:function(){alert("잠시 후 다시시도해 주세요.")}})}},{key:"getReview",value:function(){e.ajax({url:n.htReview.htAPI.getReview.replace("{reviewNo}",n.htReview.sReviewNo),data:{useHeader:n.bLogin?"MN":"",useDealInfo:!0},success:function(t){if(e("#root").show(),e("#errorPage").hide(),!t||!t.data)return alert("존재하지 않는 리뷰입니다."),void("MA"===n.sDevice&&n.app.callApp("webview","closeWebView",!1));n.oModuleReview.addData([t.data]),n.oModuleReview.show("review",n.htReview.sReviewNo)},error:function(){e("#root").hide(),e("#errorPage").show()}})}},{key:"initModule",value:function(){var t=this;n.oModuleReview.init({welContainer:e("#root"),sType:"REVIEW",bIsSinglePage:!0,bUseSlider:!1,bShowModifyButtons:!0,bShowAddPhotoBtn:!0,bUseHashEvent:!1,onRecommend:function(e,i,o){n.sendLog([t.getPlatform()+"_마이리뷰","click",t.sGaPrefix+".추천"]),t.nRecommendReviewNo=e,i?t.cancelRecommendReview(e):t.recommendReview(e,o)},onDelete:function(e,i,o,a,s){n.sendLog([t.getPlatform()+"_마이리뷰","click",t.sGaPrefix+".삭제"]),t.deleteReview(e,i,o,a,s)},onReport:function(e){n.sendLog([t.getPlatform()+"_마이리뷰","click",t.sGaPrefix+".신고"]),t.nReportReviewNo=e,t.openReportReviewLayer(e)},onModify:function(e,i){n.sendLog([t.getPlatform()+"_마이리뷰","click",t.sGaPrefix+".수정"]),t.goModifyReviewPage(e,i)},onAddPhoto:function(e,i){n.sendLog([t.getPlatform()+"_마이리뷰","click",t.sGaPrefix+".사진첨부"]),t.goModifyReviewPage(e,i)},onClickDeal:function(e,i,o){n.sendLog([t.getPlatform()+"_마이리뷰","click",t.sGaPrefix+".상품",{dimension2:e,dimension8:i,dimension28:o}])},onCloseReview:function(e){var i=e||{type:""},o=t.bIsNeedReloadAppList;"PW"===n.sDevice&&(window.open("","_self",""),window.close()),n.util.gup("returnUrl")?window.location=decodeURIComponent(n.util.gup("returnUrl")):("reloadApp"===i.type&&(o=!0),"changeReviewStatus"===i.type&&(n.app.callApp("webview","callJavascriptToParent","TMON.app.oCallWeb.changeReviewStatus("+i.mainBuySrl+", "+i.mainDealSrl+")"),o=!1),n.app.callApp("webview","closeWebView",o))},onAfterRegisterReview:function(){t.bIsNeedReloadAppList=!0},onAfterModifyReview:function(){t.bIsNeedReloadAppList=!0},onShow:function(e){if("PW"!==n.sDevice)switch(e){case"list":n.util.setHeaderText("포토 리스트");break;case"review":n.util.setHeaderText(t.sReviewPageTitle);break;case"modify":n.util.setHeaderText("리뷰 수정");break;case"write":n.util.setHeaderText("리뷰 쓰기")}}})}},{key:"goModifyReviewPage",value:function(e,t){this.bIsNeedReloadAppList=!0;var i=n.util.aup(n.htReview.htUrl.modifyReview.replace("{nMainBuyNo}",e).replace("{nMainDealNo}",t),n.sAppQuery);if("MA"===this.getPlatform()){var o="return_url="+encodeURIComponent(window.location.href);n.app.callApp("webview","showView","리뷰 수정하기",n.util.aup(i,o),!0,!1)}else window.location=decodeURIComponent(i)}},{key:"deleteReview",value:function(t,i,o,a,s){var r=s.oWrite.oAlert;r.setOptions({sTitle:"리뷰를 삭제하시겠습니까?",sContents:"",oButton1:{bIsShow:!0,sContents:"취소",color:"white"},oButton2:{bIsShow:!0,sContents:"삭제"}}),r.toggle(),r.fCancelBtnCallback=function(){r.toggle(!1)},r.fBtn1Callback=function(){r.toggle(!1)},r.fBtn2Callback=function(){e.ajax({method:"POST",url:n.htReview.htAPI.deleteReview.replace("{dealSrl}",i).replace("{buySrl}",t).replace("{memberSrl}",o),success:function(e){!e.data.message||e.data.result?("PW"===n.sDevice&&(document.domain="tmon.co.kr",window.opener.toggle_review_button(t,i,!0),window.open("","_self",""),window.close()),n.oModuleReview.htOptions.onAfterRegisterReview&&n.oModuleReview.htOptions.onAfterRegisterReview(),n.oModuleReview.htOptions.onCloseReview()):alert(e.data.message)},error:function(){alert("잠시 후 다시시도해 주세요.")}})}}},{key:"recommendReview",value:function(t,i){var o=this;n.bLogin?i?this.showRejectMessage():e.ajax({method:"POST",url:n.htReview.htAPI.recommendReview.replace("{reviewNo}",t),data:{useHeader:"MN"},success:function(e){o.cbRecommend(e,!1)},error:function(){alert("잠시 후 다시 시도해 주세요.")}}):this.login()}},{key:"cbRecommend",value:function(e,t){n.oModuleReview.afterRecommend(this.nRecommendReviewNo,e.data,t),n.bIsAndroid?n.app.callApp("webview","callJavascriptToParent","javascript:TMON.oBestPhotoReview.afterRecommend("+this.nRecommendReviewNo+")"):n.app.callApp("webview","callJavascriptToParent","TMON.oBestPhotoReview.afterRecommend("+this.nRecommendReviewNo+")")}},{key:"cancelRecommendReview",value:function(t){var i=this;n.bLogin?e.ajax({method:"DELETE",url:n.htReview.htAPI.recommendReview.replace("{reviewNo}",t),data:{useHeader:"MN"},success:function(e){i.cbRecommend(e,!0)},error:function(){alert("잠시 후 다시 시도해 주세요.")}}):this.login()}},{key:"login",value:function(){var e=window.location.href;"MA"===this.getPlatform()?n.bIsAndroid?window.location=[n.htReview.htUrl.loginPage,encodeURIComponent(e),"&_sendAfterLogin=plz"].join(""):n.app.callApp("webview","login",!0):window.location=[n.htReview.htUrl.loginPage,encodeURIComponent(e)].join("")}},{key:"openReportReviewLayer",value:function(){if(n.util.setHashJSON({layer:"report"}),n.bLogin)return this.showReportLayer(),void this.clearLocalStorage();localStorage.setItem("REVIEW_ACTION_SERIAL",this.nReportReviewNo),localStorage.setItem("AFTER_LOGIN_REVIEW","REPORT_REVIEW"),this.login()}},{key:"showRejectMessage",value:function(){"PW"===n.sDevice?alert("다른 사용자의 리뷰만 '좋아요' 할 수 있습니다."):n.oModuleReview.showToast("다른 사용자의 리뷰만 '좋아요' 할 수 있습니다.")}},{key:"showReportLayer",value:function(){this.welPopWrap.show()}},{key:"hideLayer",value:function(){this.welPopWrap.hide()}},{key:"clearLocalStorage",value:function(){localStorage.removeItem("REVIEW_ACTION_SERIAL"),localStorage.removeItem("AFTER_LOGIN_REVIEW")}},{key:"needsReloadList",value:function(){return this.bIsNeedReloadAppList}},{key:"runStorageAction",value:function(){var e=localStorage.getItem("AFTER_LOGIN_REVIEW"),t=parseInt(localStorage.getItem("REVIEW_ACTION_SERIAL"),10);if(null!==e){switch(e){case"REPORT_REVIEW":this.nReportReviewNo=t,this.openReportReviewLayer();break;case"RECOMMEND_REVIEW":this.recommendReview(t)}this.clearLocalStorage()}}}]),t}();t.default=a,n.oMyReview=new a}.call(this,i(49),i(23))},348:function(e,t,i){"use strict";(function(e,t){var n=i(136),o=i(137),a=i(138),s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var r=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}return s(i,[{key:"init",value:function(e){var t=e.welContainer,i=e.sType,n=void 0===i?"REVIEWDETAIL":i,o=e.onGetNextData,a=e.aReviewList,s=void 0===a?[]:a;this.onGetNextData=o,this.aData=s,this.wel=this.render(t),this.htOptions=e,this.bLoadingNextData=!1,this.sPrevView="",this.sCurView="",this.setApi(),this.initPage(n,Object.assign(e,{welContainer:this.wel})),this.setHashChangeEvent()}},{key:"setHashChangeEvent",value:function(){var t=this;!0===this.htOptions.bUseHashEvent&&(e(window).on("hashchange",(function(){t.onChangeHash()})),this.onChangeHash())}},{key:"setApi",value:function(e){this.htApi={getReview:"/api/direct/v1/boardapi/api/review/search/{ReviewNo}",write:"/api/direct/v1/boardapi/api/review/add/{MainDealSrl}/{MainBuySrl}",modify:"/api/direct/v1/boardapi/api/review/modify/{ReviewNo}/{MainDealSrl}/{MainBuySrl}",getDealInfo:"/api/direct/v1/dealinfoapi/api/deals/list",getDealDetailInfo:"/api/direct/v1/deliveryapi/api/v2/mypage/users/buys/{MainBuySrl}?useHeader=AN&platform=M_WEB",getDeliveryInfo:"/api/direct/v1/deliveryapi/api/delivery/getBuyDetailList",reviewSurveyItems:"/api/direct/v1/boardapi/api/review/survey/info/{mainDealNo}",reviewSurveyFixItems:"/api/direct/v1/boardapi/api/review/survey/info/fixitem"},e&&(this.htApi=Object.assign(this.htApi,e))}},{key:"getApi",value:function(){return this.htApi}},{key:"showToast",value:function(e){this.oPhotoReview.showToast(e)}},{key:"addData",value:function(e){this.aData=this.aData.concat(e),this.oPhotoReview.addData(e),this.oPhotoList.addData(e),this.bLoadingNextData=!1}},{key:"deleteData",value:function(e){var t=this;this.aData.some((function(i,n){return i.reviewNo===e&&t.aData.splice(n,1),i.reviewNo===e}))}},{key:"getPrevView",value:function(){return this.sPrevView}},{key:"getNextData",value:function(){!0!==this.bLoadingNextData&&void 0!==this.onGetNextData&&"function"==typeof this.onGetNextData&&(this.onGetNextData(),this.bLoadingNextData=!0)}},{key:"hide",value:function(){this.oPhotoReview&&this.oPhotoReview.hide(),this.oPhotoList&&this.oPhotoList.hide()}},{key:"resetData",value:function(){this.aData=[],this.oPhotoReview&&this.oPhotoReview.resetData(),this.oPhotoList&&this.oPhotoList.resetData()}},{key:"afterRecommend",value:function(e,t,i){for(var n=0;n<this.aData.length;n+=1)if(this.aData[n].reviewNo===e){this.aData[n].isRecommended=!0,this.aData[n].recommendCnt=t;break}this.oPhotoReview&&this.oPhotoReview.setRecommendCount(e,t,i)}},{key:"onChangeHash",value:function(){var e=t.util.getHashJSON();switch(e.photoReview){case"review":this.show("review",localStorage.getItem("FIRST_REVIEW_ACTION_SERIAL")?localStorage.getItem("FIRST_REVIEW_ACTION_SERIAL"):parseInt(e.reviewNo,10));break;case"list":this.show("list");break;case"modify":this.show("modify",parseInt(e.reviewNo,10));break;case"write":this.show("write",null,parseInt(e.mainBuySrl,10),parseInt(e.mainDealSrl,10));break;default:this.hideAll()}}},{key:"show",value:function(e,t,i,n){if(this.sPrevView=this.sCurView,this.sCurView=e,!0===this.bIsReviewUpdateNow)return this.sTypeAfterUpdate=e,void(this.sReviewNoAfterUpdate=t);switch(e){case"list":this.oWrite.hide(),this.oPhotoReview.hide(),this.oPhotoList.show();break;case"review":this.oWrite.hide(),this.oPhotoList.hide(),this.oPhotoReview.show(t);break;case"modify":this.oWrite.show(!0,t);break;case"write":this.oWrite.show(!1,t,i,n)}this.onShow(e)}},{key:"onShow",value:function(e){"function"==typeof this.htOptions.onShow&&this.htOptions.onShow(e)}},{key:"reset",value:function(){this.sPrevView="",this.sCurView=""}},{key:"hideAll",value:function(){!0!==this.htOptions.bIsSinglePage&&("function"==typeof this.htOptions.onHide&&this.htOptions.onHide(),this.oPhotoReview.hide(),this.oPhotoList.hide(),this.oWrite.hide(),this.reset())}},{key:"initPage",value:function(e,t){this.oPhotoReview=new n.a(t,this),this.oPhotoList=new o.a(t,this),this.oWrite=new a.a(t,this)}},{key:"getData",value:function(){return this.aData}},{key:"render",value:function(e){return e.html('<div class="star_score_box"></div>')}},{key:"updateData",value:function(e,t){for(var i=0;i<this.aData.length;i+=1)if(this.aData[i].reviewNo===parseInt(e,10)){this.aData[i]=t;break}}},{key:"getReviewUpdate",value:function(i){var n=this;this.bIsReviewUpdateNow=!0,e.ajax({url:this.htApi.getReview.replace("{ReviewNo}",i),data:{useHeader:t.bLogin?"MN":"",useDealInfo:!1},success:function(e){n.bIsReviewUpdateNow=!1,e&&e.data&&(e.data.bIsUpdated=!0,n.updateData(i,e.data),n.sTypeAfterUpdate&&n.show(n.sTypeAfterUpdate,n.sReviewNoAfterUpdate),n.sTypeAfterUpdate=null,n.sReviewNoAfterUpdate=null)}})}},{key:"deleteReviewFromModuleList",value:function(e){this.deleteData(parseInt(e,10)),this.oPhotoList&&this.oPhotoList.removeItem(e),this.oPhotoReview&&this.oPhotoReview.removeItem(e),0===this.getData().length&&"function"==typeof this.htOptions.onAfterDeleteLastData&&this.htOptions.onAfterDeleteLastData()}}]),i}();t.oModuleReview=new r}).call(this,i(49),i(23))},349:function(e,t,i){"use strict";i.r(t);i(144),i(145)},49:function(e,t){e.exports=jQuery},50:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=["선택해주세요","실망이에요","별로예요","괜찮아요","좋아요","최고예요♥"]},56:function(e,t,i){"use strict";(function(e){i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return a}));var n=e.htStaticData.sImgCdn,o=function(e){return/^http/.test(e)?e:""+n+e},a=function(e){return/^http/.test(e)?e.substring(e.indexOf("/cdn")):e}}).call(this,i(23))},71:function(e,t,i){"use strict";(function(e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isRecommended:!1,recommendCnt:0,isDisplay:!0};return'<button type="button" data-role="recommend" class="btn_review_thumbs '+(!0===t.isRecommended?"on":"")+'" '+(!1===t.isDisplay?"disabled":"")+">\n            "+("PW"===e.sDevice?'<svg width="12px" height="14px" viewBox="0 0 12 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_recommend"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="ico_recommend_off"><g><rect id="area" x="0" y="0" width="12" height="14"></rect><path d="M4,12 L1.707,12 C1.31666667,12 1,11.6833333 1,11.293 L1,5.707 C1,5.31666667 1.31666667,5 1.707,5 L4,5 L4,12 Z" id="Stroke-1" stroke="#6C7580"></path><path d="M9.09090909,5.4 L7.45577273,5.4 C7.37177273,5.4 7.32468182,5.31011429 7.36763636,5.23845714 C7.61295455,4.82925714 7.81818182,3.76665714 7.81818182,3.51428571 L7.81818182,2.88571429 C7.81818182,2.57142857 7.5,1 6.54545455,1 C5.27272727,1 5.27272727,2.88571429 5.27272727,2.88571429 L5.27272727,3.51428571 C5.27272727,4.45714286 4,5.4 4,5.4 L4,10.4285714 C4,11.2963143 4.71209091,12 5.59090909,12 L8.45454545,12 C9.86027273,12 11,10.8742286 11,9.48571429 L11,7.28571429 C11,6.24448571 10.1450455,5.4 9.09090909,5.4 Z" id="Stroke-3" stroke="#6C7580" stroke-linecap="round" stroke-linejoin="round"></path></g></g></g></svg>':'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="21" viewBox="0 0 18 21" class="ico_recommend_big"><g fill="none" fill-rule="evenodd">&gt;<path stroke="#6C7580" d="M6 18H2.56a1.06 1.06 0 0 1-1.06-1.06V8.56c0-.585.475-1.06 1.06-1.06H6V18z"></path><path stroke="#6C7580" stroke-linecap="round" stroke-linejoin="round" d="M13.636 8.1h-2.452c-.126 0-.197-.135-.133-.242.368-.614.676-2.208.676-2.587V4.33c0-.472-.477-2.829-1.909-2.829C7.91 1.5 7.91 4.329 7.91 4.329v.942C7.91 6.686 6 8.1 6 8.1v7.543C6 16.944 7.068 18 8.386 18h4.296c2.108 0 3.818-1.689 3.818-3.771v-3.3c0-1.562-1.282-2.829-2.864-2.829z"></path></g></svg>')+'\n            <span class="text">'+(t.recommendCnt?t.recommendCnt:0)+(t.recommendCnt>998?"+":"")+"</span>\n        </button>"}i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return a}));var o=function(t,i){return'<div data-role="reviewMain" class="photoreview_pop" style="display:none">\n        '+("PW"===e.sDevice?'<div class="photoreview_header">\n                <h4>포토리뷰 상세보기</h4>\n                <button type="button" data-role="close" class="btn_close">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" viewBox="0 0 23 23" class="ico_btn_close"><path fill="#6C7580" fill-rule="evenodd" d="M22.281 0L23 .719 12.218 11.5 23 22.281l-.719.719L11.5 12.218.719 23 0 22.281 10.781 11.5 0 .719.719 0 11.5 10.782 22.281 0z"></path></svg>\n                    <span class="blind">닫기</span>\n                </button>\n            </div>':"")+'\n        <div data-role="reviewWrap" class="_reviewWrap swiper-container-p">\n            <div class="swiper-wrapper" data-role="reviewContainer"></div>\n        </div>\n        '+("PW"===e.sDevice?'<button type="button" data-role="prevReview" class="btn_arrow_prev" aria-label="이전 슬라이드" style="'+(t.length<=1?"display:none":"")+'"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 54 54" class="ico_prev_arrow"><g fill="none" fill-rule="evenodd"><path fill="#16181a" fill-rule="nonzero" d="M35 12.676L34.31 12 19 27l15.31 15 .69-.676L20.38 27z"></path></g></svg></button>\n            <button type="button" data-role="nextReview" class="btn_arrow_next" aria-label="다음 슬라이드" style="'+(t.length<=1?"display:none":"")+'"><svg xmlns="http://www.w3.org/2000/svg" width="54" height="54" viewBox="0 0 54 54" class="ico_next_arrow"><g fill="none" fill-rule="evenodd"><path fill="#16181a" fill-rule="nonzero" d="M19 41.324l.69.676L35 27 19.69 12l-.69.676L33.62 27z"></path></g></svg></button>':"")+'\n        <div id="review-recommend-button" class="_reviewRecommend">'+("PW"!==e.sDevice?n({}):"")+'</div>\n        <div class="section_fixed">'+(i?'<div class="review_deal_area">\n                <div class="fig">\n                    <div class="thumb" style="background-image:url('+i.sImage+')"></div>\n                </div>\n                <div class="info">\n                    <strong class="title_name">'+i.sTitle+'</strong>\n                    <div class="price_area">\n                        '+i.sPriceTypeHtml+'\n                        <span class="price">\n                            <span class="num">'+i.sPrice+"</span>원\n                            "+i.sPriceOver+"\n                        </span>\n                        "+(i.sOrgPrice?'<span class="original_price">\n                                <span class="blind">원가</span>\n                                <span class="num">'+i.sOrgPrice+"</span>원\n                            </span>":"")+'\n                    </div>\n                </div>\n                <a href="'+i.sUrl+'"\n                    data-role="dealLink"\n                    data-title="'+i.sTitle+'"\n                    data-dealNo="'+i.nDealNo+'"\n                    class="review_deal_link"\n                    '+("PW"===e.sDevice?'target="blank"':"")+"></a>\n            </div>":"")+'</div>\n        <div data-role="review_toast" class="review_toast_recommend" style="display:none;">\n            <p class="text">추천해주셔서 감사합니다.</p>\n        </div>\n    </div>'};function a(t){return'<div class="photoreview_wrap review_detail">\n            <h1 class="review_write_title">리뷰 상세보기</h1>\n            <div class="review_image_wrap" style="'+(!0===t.hasImage&&t.imageInfo&&t.imageInfo.image?"":"display:none")+'">\n                <div class="photo_detail_area">\n                    '+(!0===t.hasImage&&t.imageInfo&&t.imageInfo.image?'<div class="photo_container">\n                                <div class="swiper-container-c">\n                                    <ul class="photo_list swiper-wrapper">'+t.imageInfo.image.map((function(e,t){return'<li class="photo_item swiper-slide '+(0===t?"show":"")+'">\n                                                <img data-role="mainImage" src="'+e+'" alt="사용자가 업로드한 제품 사진입니다." onError="$(this).remove();">\n                                                <div class="no_img">\n                                                    <span class="blind">이미지없음</span>\n                                                </div>\n                                            </li>'})).join("")+"</ul>\n                                </div>\n                            </div>":"")+"\n                    "+("PW"!==e.sDevice?'<div class="info" '+(!0===t.hasImage&&t.imageInfo&&t.imageInfo.image.length>1?"":'style="display:none"')+'>\n                            <div class="swiper-pagination" style="display:none;">\n                                <span class="swiper-pagination-current"></span>\n                                <span class="swiper-pagination-total"></span>\n                            </div>\n                            <span class="cnt" style="'+("PW"!==e.sDevice?"position:static;bottom:14px;z-index:20;left:50%;transform:translateX(-50%);-webkit-transform:translate(-50%);":"")+'">\n                                <span data-role="pageNationCurrent" class="cnt_current">1</span> / <span class="cnt_total">'+(!0===t.hasImage&&t.imageInfo?t.imageInfo.image.length:0)+"</span>\n                            </span>\n                        </div>":"")+'\n                </div>\n            </div>\n            <div class="photoreview_content">\n                <div class="photo_add_area '+(!1===t.isDisplay?"disabled":"")+'" style="display: '+(!0===this.bShowAddPhotoBtn&&!1===t.hasImage&&!0===t.isOwner?"block":"none")+'">\n                    <div class="photo_add_thumb"></div>\n                    <div class="photo_add_text">\n                        <strong class="photo_add_title">이미지 등록하기</strong>\n                    </div>\n                    <a data-role="addPhoto" href="#none" class="photo_add_link\n                        '+(!1===t.isDisplay?"disabled":"")+'"></a>\n                </div>\n                <div class="photoreview_box scroll">\n                    <div class="photoreview_rate_box">\n                        <div class="photoreview_rate">\n                            <div class="photoreview_star">\n                                <span class="text">상품</span>\n                                <span class="star_rate">\n                                    <span class="star_progress_bar" style="width: '+100*t.dealGpoint/5+'%;">\n                                        <span class="blind">상품 평점 '+t.dealGpoint+"</span>\n                                    </span>\n                                </span>\n                            </div>\n                            "+(0!==t.deliveryGpoint?'<div class="photoreview_star">\n                                    <span class="text">배송</span>\n                                    <span class="star_rate">\n                                        <span class="star_progress_bar" style="width: '+100*t.deliveryGpoint/5+'%;">\n                                            <span class="blind">배송 평점 '+t.deliveryGpoint+"점</span>\n                                        </span>\n                                    </span>\n                                </div>":"")+'\n                        </div>\n                        <div class="review_tag">'+(t.reviewSurveyList&&t.reviewSurveyList.length>0?t.reviewSurveyList.map((function(e){return'<span class="review_tag_label">#'+e.keyword+" - "+e.selection+"</span>"})):"")+'</div>\n                        <div class="review_tag">'+(t.reviewSurveyFixItemList&&t.reviewSurveyFixItemList.length>0?t.reviewSurveyFixItemList.map((function(e){return'<span class="review_tag_label">#'+e.keyword+" - "+e.selection+"</span>"})):"")+"</div>\n                        </div>\n                        "+(t.optionDealInfo?t.optionDealInfo.optionDealInfoList.length>=2?'<div class="button_list_box" data-role="openOptionWrap">\n                                    <span class="blind">상품 옵션</span>\n                                    <div class="options_box">\n                                        <button data-role="openOptionBtn" type="button" class="button_list" aria-label="옵션 딜 더보기">\n                                            <span class="text">'+t.optionDealInfo.optionDealInfoList[0].title+'</span>\n                                            <svg width="11px" height="6px" viewBox="0 0 11 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="ico_arrow"><g id="Symbols" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="btn_open" fill="#B7BFC8" fill-rule="nonzero"><polygon transform="translate(5.500000, 3.000000) rotate(-180.000000) translate(-5.500000, -3.000000) " points="5.5 1.4 0.723 6 0 5.3 4.777 0.7 5.5 0 11 5.3 10.277 6"></polygon></g></g></svg>\n                                        </button>\n                                        <div class="button_list_bind">'+t.optionDealInfo.optionDealInfoList.map((function(e,t){return 0===t?"":'<span class="button_list_text">'+e.title+"</span>"})).join("")+"</div>\n                                    </div>\n                                </div>":'<div class="button_list_box" data-role="openOptionWrap">\n                                    <span class="blind">상품 옵션</span>\n                                    <div class="options_box">\n                                        <div class="button_list">\n                                            <span class="text">'+t.optionDealInfo.optionDealInfoList[0].title+"</span>\n                                        </div>\n                                    </div>\n                                </div>":"")+'\n                    <div class="photoreview_text">'+t.contents.replace(/\n/g,"<br>")+'</div>\n                </div>\n                <div class="photoreview_box2">\n                    <div class="photoreview_image" style="'+(!0===t.hasImage&&t.imageInfo&&t.imageInfo.image.length>1?"":"display:none")+'">\n                        <ul class="review_image_list">'+(!0===t.hasImage&&t.imageInfo?t.imageInfo.image.map((function(e,t){return'<li data-role="photoOver" class="review_image_item '+(0===t?"on":"")+'" data-image="'+e+'">\n                                    <button type="button" class="review_image_box" aria-label="이미지 상세보기">\n                                        <img src="http://storage.tmon.co.kr/thumbs/image?w=300&h=300&url='+e+'" onerror="this.parentNode.className=\'review_image_box error\'">\n                                    </button>\n                                </li>'})).join(""):"")+'</ul>\n                    </div>\n                    <ul class="type_bar_list">\n                        <li class="type_bar_item">'+t.whoCreate+'</li>\n                        <li class="type_bar_item">'+t.createDt.substring(0,10).replace(/-/g,".")+' <span class="type_bar_text">작성</span></li>\n                        '+(!1===t.isOwner?'<li class="type_bar_item"><button type="button" data-role="report" class="btn_type_bar">신고</button></li>':"")+"\n                    </ul>\n                    "+("PW"===e.sDevice?n(t):"")+'\n                </div>\n                <div class="review_btn_wrap">\n                    '+(!0===t.isOwner&&!0===this.bShowModifyButtons?'<button data-role="deletePhotoReview" type="button" class="review_btn delete">삭제</button>\n                        <button data-role="modifyPhotoReview" type="button" class="review_btn edit"\n                            '+(!1===t.isDisplay?"disabled":"")+">수정</button>":"")+'\n                    <div class="review_notice_wrap">\n                        <p class="review_notice" style="display:'+(!1===t.isOwner||!1===t.isDisplay?"none":"block")+'">\n                            리뷰 내용에 대한 책임은 작성자에게 있으며,<br>\n                            등록된 내용은 상품 판매/홍보 메뉴에 노출될 수 있습니다.\n                        </p>\n                        <p class="review_notice alert" style="display:'+(!0===t.isOwner&&!1===t.isDisplay?"block":"none")+'">\n                            이 리뷰는 신고에 의해 비공개 처리되었습니다.<br/>\n                            비공개 리뷰는 수정이 제한되며 적립 혜택에 반영되지 않습니다.<br/>\n                            삭제 후 신고의 소지 없이 작성해 주세요.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>'}}).call(this,i(23))}});